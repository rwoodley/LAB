<!DOCTYPE html>
<html lang="en">
	<head>
        <style>
			body {
				font-family: Monospace;
				background-color: #000;
				margin: 0px;
				overflow: hidden;
			}
            .availableMediaPanel {
                position: fixed;
                top: 0;
                width: 95%;
            }
            .availableMediaPanelInner {
                width: 90%;
                margin: 0 auto;             
            }
            .videoPanel {
                position: fixed;
                bottom: 0;
                width: 95%;
            }
            .videoPanelInner {
                width: 95%;
                margin: 0 auto;             
            }
            .cameraPanel {
                position: fixed;
                bottom: 10%;
                width: 95%;
            }
            .cameraPanelInner {
                width: 95%;
                margin: 0 auto;             
            }
		</style>
        <link rel="stylesheet" type="text/css" href="mediaUtils.css">
		<script src="r73/three.js"></script>
        <script src="r73/OrbitControls.js"></script>
		<script src="r73/Detector.js"></script>
 		<script src="r73/stats.min.js"></script>
		<script src="lib/jquery-3.1.0.min.js"></script>
        <script src="mediaUtils.js"></script>
        <script src="utils.js"></script>
        <script src="textures/files.js"></script>
        <script src="textures/videos.js"></script>
        <script id="vs" type="x-shader/x-vertex">
            varying vec2 vUv; 
            void main()
            {
                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0 );
                gl_Position = projectionMatrix * mvPosition;
                vUv = uv;
            }
        </script>
        <script id="fs" type="x-shader/x-fragment">
            uniform sampler2D iChannel0;
            varying vec2 vUv;  
            void main()
            {
                vec2 uv = vUv;
                vec4 tex1 = texture2D( iChannel0,  uv);
                gl_FragColor = tex1;
            }
        </script>
		<script>
			var _container;
			var _camera, _controls, _scene, _renderer, _uniforms, _clock, _mediaUtils;
			var myMesh;
			function init() {
                if ( ! Detector.webgl ) {
                    Detector.addGetWebGLMessage();
                    document.getElementById( 'container' ).innerHTML = "";
                }

                _clock = new THREE.Clock();
                _container = document.getElementById( 'container' );

                _camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 20000 );

                _scene = new THREE.Scene();
                _controls = new THREE.OrbitControls( _camera, _container.domElement );
                _renderer =  new THREE.WebGLRenderer({ antialias: true } );
                _mediaUtils = new mediaUtils(
                    _scene, 
                    _camera, 
                    myTextures, 
                    myVideos, 
                    "mediaListContainer", 
                    "cameraControlsContainer",
                    "videoControlsContainerId");

                _camera.position.x = -1; _camera.position.y = 0.0; _camera.position.z = 0;
                _renderer.setSize( window.innerWidth, window.innerHeight );

                document.getElementById( 'container' ).innerHTML = "";
                _container.appendChild( _renderer.domElement );
                animate();
			}

			function animate() {
				requestAnimationFrame( animate );
				_controls.update( _clock.getDelta() );
				_renderer.render( _scene, _camera );
                _mediaUtils.animate();
			}
            $().ready(function() {
                init();
            });
</script>
</head>
	<body>
		<video  id="video"
		  style="display: none;
		  position: absolute; left: 15px; top: 75px;"
		  controls="true" autoplay="true">
		</video>
		<div id="container"><br /><br /><br /><br /><br />Generating...</div>
        <div style="position: fixed; top: 3%; width:95%; ">
            <div class="videoPanel">
                <div class="videoPanelInner">
                    <div id="videoControlsContainerId">
                    </div>
                </div>
            </div>
            <div class="cameraPanel">
                <div class="cameraPanelInner">
                    <div id="cameraControlsContainer">

                    </div>
                </div>
            </div>
            <div style="float: right; "  class="availableMediaPanel ">
                <div class="availableMediaPanelInner">
                    <div id="mediaListContainer" >
                    </div>
                </div>
            </div>
        </div>
        <script>
        </script>
	</body>
</html>
